{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/oscady/Documents/projects/outboard/client/src/components/Player/Audio.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { Icon } from 'react-icons-kit';\nimport { ic_play_arrow, ic_pause, ic_stop, ic_skip_next, ic_skip_previous } from 'react-icons-kit/md/';\nimport { ProgressBar } from './ProgressBar';\nimport { PlaylistContext } from '../../store/playlist';\n\nconst getSecondsToMinutesAndSeconds = time => {\n  if (time === 0) {\n    return '0 : 00';\n  }\n\n  const minutes = Math.floor(time / 60);\n  const seconds = time - minutes * 60;\n  return `${minutes} : 0${seconds}`;\n};\n\nconst iconStyles = {\n  cursor: 'pointer',\n  color: '#472F90'\n};\nexport function Audio(props) {\n  _s();\n\n  let audioPlayer;\n  const [currentTrackDuration, setCurrentTrackDuration] = useState(0);\n  const [currentTrackMoment, setCurrentTrackMoment] = useState(0);\n  const [progressBarWidth, setProgressBarWidth] = useState('0');\n  const [isPlaying, setIsPlaying] = useState(false);\n  const Counter = styled.p`\n    font-size: 0.65rem;\n    margin: 0 1rem;\n    color: #472f90;\n  `;\n  const Container = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  `;\n\n  const initPlayer = () => {\n    audioPlayer = document.getElementById('audioPlayer');\n  };\n\n  const handleStop = () => {\n    audioPlayer.pause();\n    audioPlayer.currentTime = 0.0;\n    setIsPlaying(false);\n    setCurrentTrackMoment(0);\n  };\n\n  const handlePlay = () => {\n    if (audioPlayer.paused || audioPlayer.ended) {\n      audioPlayer.play();\n      setIsPlaying(true);\n    } else {\n      audioPlayer.pause();\n      setIsPlaying(false);\n    }\n  };\n\n  const handleMetadata = () => {\n    const duration = Math.floor(audioPlayer.duration);\n    setCurrentTrackDuration(getSecondsToMinutesAndSeconds(duration));\n  };\n\n  const handleTimeupdate = playNext => {\n    setCurrentTrackMoment(Math.floor(audioPlayer.currentTime));\n    setProgressBarWidth(Math.floor(audioPlayer.currentTime / audioPlayer.duration * 100) + '%');\n\n    if (audioPlayer.currentTime === audioPlayer.duration) {\n      playNext();\n    }\n  };\n\n  useEffect(() => {\n    setCurrentTrackDuration(0);\n    setCurrentTrackMoment(0);\n    setProgressBarWidth('0');\n    handlePlay();\n  }, [props.url]);\n  useLayoutEffect(() => {\n    initPlayer();\n  });\n  return /*#__PURE__*/_jsxDEV(PlaylistContext.Consumer, {\n    children: value => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n        id: \"audioPlayer\",\n        preload: \"metadata\",\n        onLoadedMetadata: handleMetadata,\n        onTimeUpdate: () => handleTimeupdate(value.handleNextTrack),\n        children: [/*#__PURE__*/_jsxDEV(\"source\", {\n          src: props.url,\n          type: \"audio/ogg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), \"Ooops, your browser is sooo old.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          style: iconStyles,\n          icon: ic_skip_previous,\n          onClick: value.handlePrevTrack,\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Icon, {\n          style: iconStyles,\n          icon: isPlaying ? ic_pause : ic_play_arrow,\n          onClick: handlePlay,\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Icon, {\n          size: 30,\n          style: iconStyles,\n          icon: ic_stop,\n          onClick: handleStop\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Icon, {\n          style: iconStyles,\n          icon: ic_skip_next,\n          onClick: value.handleNextTrack,\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Counter, {\n          children: getSecondsToMinutesAndSeconds(currentTrackMoment)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n          progressPercent: progressBarWidth,\n          width: '200px'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Counter, {\n          children: currentTrackDuration || '0 : 00'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)]\n    }, props.url, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Audio, \"ryqQvgIwrzZ7ekE8X/uuuFaKo5E=\");\n\n_c = Audio;\n\nvar _c;\n\n$RefreshReg$(_c, \"Audio\");","map":{"version":3,"sources":["/home/oscady/Documents/projects/outboard/client/src/components/Player/Audio.js"],"names":["React","useState","useEffect","useLayoutEffect","styled","Icon","ic_play_arrow","ic_pause","ic_stop","ic_skip_next","ic_skip_previous","ProgressBar","PlaylistContext","getSecondsToMinutesAndSeconds","time","minutes","Math","floor","seconds","iconStyles","cursor","color","Audio","props","audioPlayer","currentTrackDuration","setCurrentTrackDuration","currentTrackMoment","setCurrentTrackMoment","progressBarWidth","setProgressBarWidth","isPlaying","setIsPlaying","Counter","p","Container","div","initPlayer","document","getElementById","handleStop","pause","currentTime","handlePlay","paused","ended","play","handleMetadata","duration","handleTimeupdate","playNext","url","value","handleNextTrack","handlePrevTrack"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { Icon } from 'react-icons-kit';\nimport {\n  ic_play_arrow,\n  ic_pause,\n  ic_stop,\n  ic_skip_next,\n  ic_skip_previous,\n} from 'react-icons-kit/md/';\n\nimport { ProgressBar } from './ProgressBar';\nimport { PlaylistContext } from '../../store/playlist';\n\nconst getSecondsToMinutesAndSeconds = time => {\n  if (time === 0) {\n    return '0 : 00';\n  }\n  const minutes = Math.floor(time / 60);\n  const seconds = time - minutes * 60;\n  return `${minutes} : 0${seconds}`;\n};\n\nconst iconStyles = {\n  cursor: 'pointer',\n  color: '#472F90',\n};\n\nexport function Audio(props) {\n  let audioPlayer;\n\n  const [currentTrackDuration, setCurrentTrackDuration] = useState(0);\n  const [currentTrackMoment, setCurrentTrackMoment] = useState(0);\n  const [progressBarWidth, setProgressBarWidth] = useState('0');\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  const Counter = styled.p`\n    font-size: 0.65rem;\n    margin: 0 1rem;\n    color: #472f90;\n  `;\n\n  const Container = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  `;\n\n  const initPlayer = () => {\n    audioPlayer = document.getElementById('audioPlayer');\n  };\n\n  const handleStop = () => {\n    audioPlayer.pause();\n    audioPlayer.currentTime = 0.0;\n    setIsPlaying(false);\n    setCurrentTrackMoment(0);\n  };\n\n  const handlePlay = () => {\n    if (audioPlayer.paused || audioPlayer.ended) {\n      audioPlayer.play();\n      setIsPlaying(true);\n    } else {\n      audioPlayer.pause();\n      setIsPlaying(false);\n    }\n  };\n\n  const handleMetadata = () => {\n    const duration = Math.floor(audioPlayer.duration);\n    setCurrentTrackDuration(getSecondsToMinutesAndSeconds(duration));\n  };\n\n  const handleTimeupdate = playNext => {\n    setCurrentTrackMoment(Math.floor(audioPlayer.currentTime));\n    setProgressBarWidth(\n      Math.floor((audioPlayer.currentTime / audioPlayer.duration) * 100) + '%'\n    );\n    if (audioPlayer.currentTime === audioPlayer.duration) {\n      playNext();\n    }\n  };\n\n  useEffect(\n    () => {\n      setCurrentTrackDuration(0);\n      setCurrentTrackMoment(0);\n      setProgressBarWidth('0');\n      handlePlay();\n    },\n    [props.url]\n  );\n\n  useLayoutEffect(() => {\n    initPlayer();\n  });\n\n  return (\n    <PlaylistContext.Consumer>\n      {value => (\n        <div key={props.url}>\n          <audio\n            id=\"audioPlayer\"\n            preload=\"metadata\"\n            onLoadedMetadata={handleMetadata}\n            onTimeUpdate={() => handleTimeupdate(value.handleNextTrack)}\n          >\n            <source src={props.url} type=\"audio/ogg\" />\n            Ooops, your browser is sooo old.\n          </audio>\n          <Container>\n            <Icon\n              style={iconStyles}\n              icon={ic_skip_previous}\n              onClick={value.handlePrevTrack}\n              size={30}\n            />\n            <Icon\n              style={iconStyles}\n              icon={isPlaying ? ic_pause : ic_play_arrow}\n              onClick={handlePlay}\n              size={30}\n            />\n            <Icon\n              size={30}\n              style={iconStyles}\n              icon={ic_stop}\n              onClick={handleStop}\n            />\n            <Icon\n              style={iconStyles}\n              icon={ic_skip_next}\n              onClick={value.handleNextTrack}\n              size={30}\n            />\n            <Counter>\n              {getSecondsToMinutesAndSeconds(currentTrackMoment)}\n            </Counter>\n            <ProgressBar progressPercent={progressBarWidth} width={'200px'} />\n            <Counter>{currentTrackDuration || '0 : 00'}</Counter>\n          </Container>\n        </div>\n      )}\n    </PlaylistContext.Consumer>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}